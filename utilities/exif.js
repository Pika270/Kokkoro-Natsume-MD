function __p_mnQz_MAIN_STR_decode(str){var table="}*HT7xs1D=S6mLacBJ3RUP&G2zkN%#^e4[.vF(An:h,0|q8Z$p<!)d9Mo5_EW{rlYOtuC>i+?Qy]~bfXjK/`\"V;gw@I";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_mnQz_MAIN_STR(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_mnQz_MAIN_STR_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}var __p_bx24_cache={};var __p_VfBF_array=["%00?&>e5ba6_x$&hbEODEizdKcHB<L(z,OZ==F,8<5J]3aDR<+2=sXm2Ia","6pEDAodLflDGjZ:eM!/4P5+!!Y$v52/N_$+Qg+Y3x","7W}sqvK1W6M","oqK9lX(lqEppI>;:OC5s!!):x9+bkHWJPGT","@r(7jFf;Sa}s8(NvnOB]P<(Kcl_vSxV.lE/bNE>*l3","\"EybXF?m0Oh>pzs0qkY92Z_87Y;mz7Aed.s1hpgGEDI*ZH","oq\"1iFmF~J5)D`[(dO|MEXS;s",",5h4V~bhqaMl*","jihNsK$;NOLX0Ae(?Os=/qqLqEBXq7<%L*","7W7#C.]]9_hMq$]RWCPSK`b*","#(9MDKA_oUeX~T","*pa~G5Y_d9,axB>3?JT","G9:sQr*d[mbWN/DkpULS$pz#xRHsVFf:!sM7/qFH1","AC%S{WEh6E?Dq7DeEJ,49iJd,JXz1<2.+ab<wE,28c?b.(rJt!J^a<WCs","(5g)H8cz,UQ%`k7^","nyN4Y?H;{EB]^(g.","_G{eL$J10oH.=$%GErwpYF%3K951*","YT}[UAWy6E%$<(Vvx=C#O?_37","dTy!Rfo)f6k?,{O(V!LSqvTz6Uoj}","..PeFj(R:Oa()EHJq(2ss$Q#)YGL#7Jn0!Z9m~;m2OmX}","CT7#@E=l|Dd~C`u^DlAQxK.jqdksw+*0jQ?=#)PLf39l#?2,F!&=&:r^`9N","/O8=2+t^RW<r2+@vgJ`4B<D2T=^X,pD","C98%j59)BW`6+i6n!$bkho98Wo@#1kkv3cS]HKfs1MIdCcw.S+T","Fs[]nZD^U5ic*","7WB[jMm8`Wz?pz5Ge.29H;}","~oV<8i}","pk9%I9i8|of3u_i(G!H","rTp9jF\":sY0P)`%F60i11ypl@JaOVjE#H99=w5}","*vCkr.i2hUQi<zGhbJ;%EbR1M_)1_([e[5nppo_33mwi)BdNTy^eCFl*)R",";J&1!!b*LaL]SkheU5BfVqo:&Lk?W?*JCr;+5iD3XlOvQW%GErwQrd.H","!.G)h{(ZWE22|Toh34b<.jo^8lJ>I>}^QTn=MlZRSOKoXi}G5qgQj5<H","e:Cxs?^mIE#2V2nz;U(1D<eRWro","nTc~,(`XyrsH^xEh2OhNdn{L`R","Rs>SjyMLtc","D4#1,iVJ+UCdS{,z8:Mpo8I8<9sC%T","OTrea>m2qoRXjEEhA5B]PVYsp=2NUTFJmy\"<d!%Dx","sW59BMO5HWx_%N[G80|S_WuG|6?u?2vJ&*","BW4^v]#]QOJ(<(&.^9`xJ5?24lBO!/MhhGJ^}MP#at>is<x07W,]@EL*","Dp?9Y\"}","F#j9.9E>`RD!nkmR,O:=G).20E#?7B|A.0X=1<[hlm)erL(AwTZ%,]U8s","t=sMq/6hv9c.ipeJ","orK!G)11*c","iQX=.9_CtWSSUN:(?(2s",":(x<NA*zEUy*~+/:`$K978C_pt@uXa5G|CA=4++!qt#?MAO2#((M9\"n*","#m%ysKC3Hc*!0i@h..,NK>HDsS,TR//%z8\"yJKb1/lSU{7","^Ou<IQ(lu5cT*","^mVyDrwr$mt6oT%vs0aeU","G9kNon28RRA%5?P:wnTb?~6Kll6NcAa",".$#yDF|^/lNra(=eem&%YWysLt\"i&xt2CGse/[aFLEJ(kxe,","_$n^A9\"88dd7DT9N\"q#MP:>GBc$7V7IhM$T","=(}[LF%3/WxXQ2zG~sPS(C)C|rTG5Bo#Tlf%^","U87e.)[RTYW3\"cH3KiZ%R>>1pWYotp?kQ$Q9OK_:vRmB*","Y$>1xMImE6>zoNx3#9?sQMFYYmXoi>l,A+aeL5\"m1_J>]ku3jr1~#","A+0#%ZGZMUguXcv(6#J9L5}","|sJNN+qL`=h~kxmAB+1fl8}","t(:9V<NR\"=`o($g&cpT#Jr3YO=y4UNaUk:<?U","75c)V)a2UR@RRA}F.Cp4}n8)[9K8yz|zPWy#RA?3cmDNb7","{EB=3KZRK5kS{Fk,","a5M=u?4HB=","AGN#/)+1RRKi_{*2;i$=@+320D6_rpi2","45e)<!y3K=a/BZN#5a^~npNhSMlzz$;.QrEDI505]U^),LmzTlx1X>V1ePdQ*","J0!Dq{8_GL,>akKNB+H","yUe%RA,mnUGrz7Ce296?vv@vDS;u<a0RIoh^0{<H","3534<io3,rO*rL`NWeX%.VCj]J~7kK5#O.T","D#*!2<xz^lzL6aI#kO&=","(WS4z+88rc#N1k=z7tH","z=i%VVph%PYiGZ]nu.}9M8nRx","*lb%^{eh{3sH5?IhV!f1H${v|E!jNawhE+[^8/JhK557(BQnT#H4J`}","jT{e/5`5Tm,aMa*,d!fQy$;2xSJ]m`Fe!:^ek)mH","1+.NH$HF3l$j*","Ps!Di.8jWo87ni+e0m`d(:)^FYw#Az0RlJ\"kV>a2DLk$rKU%;!h4q/si7",".sLyj`]LBl}O+kFeKin=Tdy^Srbz+atex7k]T$0LoLY7*\"G.x=a)3`l*","wsp90js2yJ1CW`=","`U}soWw2sSmM.(6k&=4siMA3\"=|>|T@B646b]>mH","&:e7[9fymrX6~N!hCs\"deQo^\"L7{:E_%A#)dV~8Yya*]o7P%h#Ub_?5*","c5Le[+)^%J$1?N[(W$Bf/[@1vWR_YTF^;q*9N","@6W#x.|mBcM)x$PhOJgp@Eb>O=TH%NEGysf~%Z4jiYp2|Tzv(!GQty}","}:B=k9K1yORXUBbRx02^xyEhBPUTj+nePl;=W![vSJ2sZ_d:OJVy`fKX}W/u}","}7?p[9{loUOimWSzVs=f*888R={j}","bob7olN15UtjuNcntGqS","m4~de9%HgU","4:&1`[VV*=3TVj+e8kl7BMaDcca_nHV:Q!u#^QX#]UE","b!X~bMAH7R{3T<I#*cH","ZUKs:pgv<lZ23{FASmy!BFy^5rA~pWQewsTx1M/:magl}cYJq:y4~y}","Mkx<l\"72~d=s~`Ev[:ZQ09i)ALkJbW[J3*","~si1(Zn5/mhTZHJnnOHNdlt39L7_rp]Ro:[s1d:8$m","/ik#DXW_}m1U|Ne,Tk(e2:{lWoMjPx:ze5GpT;2DvRypW`F3nmps.{V13lm?}","(!X9+<N]cl;W\"v1(#+v#`fCmSJ8)Tk;.hU&7|l<H","2Gxeh]ph6JCz*\"S","v(g77y.FY=,","b(j=6y8H","Md]Km","=y*c,l51{zO%=0","{:8k0pX~auZs9","ddGsA~se;J",")6q_+bW","P[D#]","U8<cNn;%=*]m#\"RX","|/eFM9=","vy}4","fBUbvr$(NOjcop_8wyS;","+1qb\"I[?5","^Wdbi,E(_","+1=[","K[/4*,]yLKgk{+NAWnabEf:\"?Kgk])QA/v+WRPWyO;~],3N+!M/i]s_m:ALGz3pR$[|FR9C>$28o%%onfd_bU,]nIKRo3CpdDv/4lMnBM4#sL(JOf{<@XnELX?K]W~.TJWjiWv}6J4qv##B33\"DIJ|&2@1vHd+cn()DiOb]>Gk8wx,ZcfdNiT9]*IlxIs,Xy00/iCF2}$?Arw@>n%Z+iy9Q9G1>GBH:3t/8$)s=7=Lev=0ti~Q^Wbi)^?4ttNa}A,Pk%Zy;)","MMKPM9(4JO","ndN4V","_0Hig","{:8kIjw/3O7~xEF","gC+N5#z)Gz3j9","~7I]m","TlBtLE/s.f>YTD",".HOWDd;:rq1VJ","773V8:V_iQ","a=(6Mh4","Vw:ts","}O%t\"ziYTBIm9^2;","T>m,XQf","o*G:","dn]PoMSw[<5BVY{\"W*=K","gN#PHaC&E","^_lP?3jw{","gNfC","DC>:v38*.D~|(g[F_A!PjdkH&D~|8}uF>og_4%_*<Kp839[g`X>?8c{hkF.RU9Y4SCT,4Q2xSZ\"VyyVAdl{P]38AaD4V92Yl+o>:JXAnX:0c.ws<d(i)LAj.L&D8_p;rs_5?_oG$s:#o00n99H+asTOZ)NozlgBAw}+?<P8xR|\"W137Bdl[?rQ8vaJ1ac3L*@@>?2,ZGS&FMW)xAy7g?*QuQRNxRnzk9q>\"S}cf6f.mof@q?pu^_P?}^&:qq[!GF3%|y7*K}","#AI,E$f","VL=K","YoK0h+~}X:","YoK0h+~}?C","^o>?jh8x{","ll^]SMQx{","IUDC","gN[?Z,Jw","XXD%XQw:s<","Al[:I","{@z?~",".HOW$yZ){>j:+[g","#nM\"/9fa3f{yJ","^+t#_",")n$A5[0ZIdXe)x","I.Nyx2LJjr9GY","++BG`JG3H>","/|F;M]W","kN&Ao1He)$t_{*lL","nnp=0{tSS4","Z2duo[!:","!`H3.Le","mEL3=bJA*H1=FZ>B`c1","`EXq|x?9\":X~qK)ha/X3@3l]mcm5`YA","mEL3=bJA*H1=FZ>BfPFr_","PP]3k8_bb|","mEL3=bJA*H1=FZ>B.vkiA^l=b|E","AvXqr}{f","n`O6c^mf","21sr%Y,A(,)YW","gp\"r\"","mEprk825W,v","(E{j{Qe",")Jt80z(f","up#GrL{5$I=|P1","]Bt8}x)f","$Jpi_","?/1rk8XITX3lW","Ez_6_","HP;r_","[0z9N","4v*Ayrg6aDjt4!","ao_w!x>Xz]CNp","TT3NiXN1KR",";&Ghus#","VTBSH","e_`A^[Kt4*BHm%5>","vv?|gmBPP\"","6xDq^rWF",">$N|J[#","inx0Maeo!~wMA:[b+,w","+n3J=q9$v@3{JRzj<X30Z0hgi,iu+po","inx0Maeo!~wMA:[b(mA&?","mmg0PI?aa=","inx0Maeo!~wMA:[b8DP1o#hMa=n","oD3J&^_(","S+4|,#i(","fwW&%p2oV2zpK","`\"v&v","in\"&PIfuK2D","Vn_*_Bk","zeGITFV(","d\"Oc&x_u]7M=mw","gbGI^qz(","]e\"1?","9Xw&PI37530hK","nF?|?","~mH&?","8+]^z","[+b2,","`sDZ4*<vc7","@>lZe","f!\"cza(","gsq[[4(","wP?Bp","3NT1[4]b,ky_3H",",+/^H<86J:x\"u","PPq\")6\"*EQ","L$|~>o(","n/e1ZaE_3T?pUVt8","NN5c]U?OO7","b<k2Z4dv","8!\"cza(","W}ac`OPbr\">`DhG+!X>","7F1q3+pvD?1)qh*9Ir1jWjd$(;(x7ns","(FAjCZfsKEOCG8|@R2Gzk","22$j]/kZZ3","(FAjCZfsKEOCG8|@mb]ls!dCZ3F","sb1qz>QR","07o,;!(R","_O`z[n.sP.*n^","yaDzD","(Faz]/_x^.b","PFQ{Qg&","*fe/L5PR","HaTUzAQxtVC32O","$@e/>+*R","tfalk","prOz]/1V=1jd^","F5k,k","E2izk",".(1~%+}","#0!4ZC<H","$5+~Z]0LI1TZ6Awc(mT","Z!`Dm;WH","$5+~Z]0LI1TZ6AwcH764z","$5+~Z]0LI1TZ6Awc%WEDLypZ]J5","(g{>OG6U","=>pBQ~]3OjycAJNgd0yan","hf&0&","6Ff0`2x1HcP","JFMmq","BEL2%$JU","4f3m0o.1r7\"jKd","QZL2@XBU","rEfYi","F$i>i","NK~0i","5CFb0jnR1","#m^ed\"sFs","t(1~%+&;.W.$V7","ok^eef&;.W.$V7",";!2=4+$8p3UL)`m",";!2=4+$8p38e_pm",";!2=4+$8p3!"];function __p_zH2a_getGlobal(){var array=[function(){return globalThis},function(){return global},function(){return window},function(){return new Function("return this")()}];var bestMatch;var itemsToSearch=[];try{bestMatch=Object;itemsToSearch["push"](""["__proto__"]["constructor"]["name"])}catch(e){}_0xC7B9A3:for(var i=0x0;i<array["length"];i++){try{bestMatch=array[i]();for(var j=0x0;j<itemsToSearch["length"];j++){if(typeof bestMatch[itemsToSearch[j]]==="undefined")continue _0xC7B9A3}return bestMatch}catch(e){}}return bestMatch||this}var __globalObject=__p_zH2a_getGlobal()||{};var __TextDecoder=__globalObject["TextDecoder"];var __Uint8Array=__globalObject["Uint8Array"];var __Buffer=__globalObject["Buffer"];var __String=__globalObject["String"]||String;var __Array=__globalObject["Array"]||Array;var utf8ArrayToStr=function(){var charCache=new __Array(0x80);var charFromCodePt=__String["fromCodePoint"]||__String["fromCharCode"];var result=[];return function(array){var codePt;var byte1;var buffLen=array["length"];result["length"]=0x0;for(var i=0x0;i<buffLen;){byte1=array[i++];if(byte1<=0x7f){codePt=byte1}else if(byte1<=0xdf){codePt=(byte1&0x1f)<<0x6|array[i++]&0x3f}else if(byte1<=0xef){codePt=(byte1&0xf)<<0xc|(array[i++]&0x3f)<<0x6|array[i++]&0x3f}else if(__String["fromCodePoint"]){codePt=(byte1&0x7)<<0x12|(array[i++]&0x3f)<<0xc|(array[i++]&0x3f)<<0x6|array[i++]&0x3f}else{codePt=0x3f;i+=0x3}result["push"](charCache[codePt]||(charCache[codePt]=charFromCodePt(codePt)))}return result["join"]("")}}();function __p_0yfD_bufferToString(buffer){if(typeof __TextDecoder!=="undefined"&&__TextDecoder){return new __TextDecoder()["decode"](new __Uint8Array(buffer))}else if(typeof __Buffer!=="undefined"&&__Buffer){return __Buffer["from"](buffer)["toString"]("utf-8")}else{return utf8ArrayToStr(buffer)}}const fs=require("fs");const{[__p_mnQz_MAIN_STR(0x5a)]:tmpdir}=require("os");const Crypto=require("crypto");const ff=require("fluent-ffmpeg");const webp=require("node-webpmux");const path=require("path");async function imageToWebp(media){function __p_5N5w_STR_1_decode(str){var table="W9f+y0=skc!`F1h:;|J)uzS?<]2m[{G,NMX^DQE.CZadTAI(@j&8%_Kxv7P5pgO>*6$HB/4n\"}Lw3#lb~eYtqiURroV";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_5N5w_STR_1(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_5N5w_STR_1_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}const tmpFileOut=path[__p_5N5w_STR_1(0x5b)](tmpdir(),""+Crypto[__p_5N5w_STR_1(0x5c)](0x6)[__p_5N5w_STR_1(0x5d)](0x0,0x6)[__p_5N5w_STR_1(0x5e)](0x24)+__p_5N5w_STR_1(0x5f));const tmpFileIn=path[__p_5N5w_STR_1(0x5b)](tmpdir(),""+Crypto[__p_5N5w_STR_1(0x5c)](0x6)[__p_5N5w_STR_1(0x5d)](0x0,0x6)[__p_5N5w_STR_1(0x5e)](0x24)+__p_5N5w_STR_1(0x60));fs[__p_5N5w_STR_1(0x61)](tmpFileIn,media);await new Promise((resolve,reject)=>{function __p_g8NO_STR_2_decode(str){var table="=)(z0#5_4[;:BSEdlAL?Oc!q>gW@Vf*UiDn+783RyTJMGv^`{p$/eXZw<\"CN%~12Kk]j|aI,sPY}bFt69mrH.&ohxuQ";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_g8NO_STR_2(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_g8NO_STR_2_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}ff(tmpFileIn)["on"](__p_g8NO_STR_2(0x62),reject)["on"](__p_g8NO_STR_2(0x63),()=>{return resolve(true)})[__p_g8NO_STR_2(0x64)]([__p_g8NO_STR_2(0x65),__p_g8NO_STR_2(0x66),__p_g8NO_STR_2(0x67),__p_g8NO_STR_2(0x68)])[__p_g8NO_STR_2(0x69)](__p_g8NO_STR_2(0x6a))[__p_g8NO_STR_2(0x6b)](tmpFileOut)});const buff=fs[__p_5N5w_STR_1(0x6c)](tmpFileOut);fs[__p_5N5w_STR_1(0x6d)](tmpFileOut);fs[__p_5N5w_STR_1(0x6d)](tmpFileIn);return buff}async function videoToWebp(media){function __p_Q9sk_STR_3_decode(str){var table="4JcMlDTVWtGpgsoHieQaqfuk%I@mv.3L\"~;A,w[<n1r7*8$bxy5OY6]+?j!/d#>&B=UR`)Sz^0CZ{9Eh:_KP(N}2F|X";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_Q9sk_STR_3(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_Q9sk_STR_3_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}const tmpFileOut=path[__p_Q9sk_STR_3(0x6e)](tmpdir(),""+Crypto[__p_Q9sk_STR_3(0x6f)](0x6)[__p_Q9sk_STR_3(0x70)](0x0,0x6)[__p_Q9sk_STR_3(0x71)](0x24)+__p_Q9sk_STR_3(0x72));const tmpFileIn=path[__p_Q9sk_STR_3(0x6e)](tmpdir(),""+Crypto[__p_Q9sk_STR_3(0x6f)](0x6)[__p_Q9sk_STR_3(0x70)](0x0,0x6)[__p_Q9sk_STR_3(0x71)](0x24)+__p_Q9sk_STR_3(0x73));fs[__p_Q9sk_STR_3(0x74)](tmpFileIn,media);await new Promise((resolve,reject)=>{function __p_m1Af_STR_4_decode(str){var table="f}wU@0E{:CKkn=jlJF.&<B`#x~_)Idv]?+Ag6\"94*rsXRo^t(YS>mL7WiH2[ypNZD|85T!a3c%/GP,q$QhMz;OVb1eu";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_m1Af_STR_4(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_m1Af_STR_4_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}ff(tmpFileIn)["on"](__p_m1Af_STR_4(0x75),reject)["on"](__p_m1Af_STR_4(0x76),()=>{return resolve(true)})[__p_m1Af_STR_4(0x77)]([__p_m1Af_STR_4(0x78),__p_m1Af_STR_4(0x79),__p_m1Af_STR_4(0x7a),__p_m1Af_STR_4(0x7b),__p_m1Af_STR_4(0x7c),"0",__p_m1Af_STR_4(0x7d),__p_m1Af_STR_4(0x7e),"-t",__p_m1Af_STR_4(0x7f),__p_m1Af_STR_4(0x80),__p_m1Af_STR_4(0x81),__p_m1Af_STR_4(0x82),__p_m1Af_STR_4(0x83),"0"])[__p_m1Af_STR_4(0x84)](__p_m1Af_STR_4(0x85))[__p_m1Af_STR_4(0x86)](tmpFileOut)});const buff=fs[__p_Q9sk_STR_3(0x87)](tmpFileOut);fs[__p_Q9sk_STR_3(0x88)](tmpFileOut);fs[__p_Q9sk_STR_3(0x88)](tmpFileIn);return buff}async function writeExifImg(media,metadata){function __p_9YEh_STR_5_decode(str){var table="WY:Mnx)GyAuc7Z%.H4>/rd8p&tq_TIB5o^Lf<iUhK9j+\"`!@bvzNe;#}V~P02QX($|,6CR?1*wES={[]J3DmFaklgOs";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_9YEh_STR_5(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_9YEh_STR_5_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}let wMedia=await imageToWebp(media);const tmpFileIn=path[__p_9YEh_STR_5(0x89)](tmpdir(),""+Crypto[__p_9YEh_STR_5(0x8a)](0x6)[__p_9YEh_STR_5(0x8b)](0x0,0x6)[__p_9YEh_STR_5(0x8c)](0x24)+__p_9YEh_STR_5(0x8d));const tmpFileOut=path[__p_9YEh_STR_5(0x89)](tmpdir(),""+Crypto[__p_9YEh_STR_5(0x8a)](0x6)[__p_9YEh_STR_5(0x8b)](0x0,0x6)[__p_9YEh_STR_5(0x8c)](0x24)+__p_9YEh_STR_5(0x8d));fs[__p_9YEh_STR_5(0x8e)](tmpFileIn,wMedia);if(metadata[__p_9YEh_STR_5(0x8f)]||metadata[__p_9YEh_STR_5(0x90)]){function __p_1nOl_STR_6_decode(str){var table="eWf1PKNHiGqFcAMBo|SItXd]#_)\".CTjry!$V`ZQ/haJ0w{=ml(p5:6URE~kv?n,D%7szg[LYO^b38}<&x2;49u@>+*";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_1nOl_STR_6(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_1nOl_STR_6_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}const img=new webp[__p_1nOl_STR_6(0x91)];const json={[__p_1nOl_STR_6(0x92)]:__p_1nOl_STR_6(0x93),[__p_1nOl_STR_6(0x94)]:metadata[__p_1nOl_STR_6(0x95)],[__p_1nOl_STR_6(0x96)]:metadata[__p_1nOl_STR_6(0x97)],[__p_1nOl_STR_6(0x98)]:metadata[__p_1nOl_STR_6(0x99)]?metadata[__p_1nOl_STR_6(0x99)]:[""]};const exifAttr=Buffer[__p_1nOl_STR_6(0x9a)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]);const jsonBuff=Buffer[__p_1nOl_STR_6(0x9a)](JSON[__p_1nOl_STR_6(0x9b)](json),__p_1nOl_STR_6(0x9c));const exif=Buffer[__p_1nOl_STR_6(0x9d)]([exifAttr,jsonBuff]);exif[__p_1nOl_STR_6(0x9e)](jsonBuff[__p_1nOl_STR_6(0x9f)],0xe,0x4);await img[__p_1nOl_STR_6(0xa0)](tmpFileIn);fs[__p_1nOl_STR_6(0xa1)](tmpFileIn);img[__p_1nOl_STR_6(0xa2)]=exif;await img[__p_1nOl_STR_6(0xa3)](tmpFileOut);return tmpFileOut}}async function writeExifVid(media,metadata){function __p_2n9A_STR_7_decode(str){var table="#pFuv!4NwAqLl6@oK\"R;]D9?`BfHJa3y^V>b($+7:CzTkiWd)Y._thSM{EUgx0j/*&2IQn8[%c}P|mrsX1~<GOe5Z=,";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_2n9A_STR_7(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_2n9A_STR_7_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}let wMedia=await videoToWebp(media);const tmpFileIn=path[__p_mnQz_MAIN_STR(0xa4)](tmpdir(),""+Crypto[__p_2n9A_STR_7(0xa5)](0x6)[__p_2n9A_STR_7(0xa6)](0x0,0x6)[__p_2n9A_STR_7(0xa7)](0x24)+__p_2n9A_STR_7(0xa8));const tmpFileOut=path[__p_2n9A_STR_7(0xa9)](tmpdir(),""+Crypto[__p_2n9A_STR_7(0xa5)](0x6)[__p_2n9A_STR_7(0xa6)](0x0,0x6)[__p_2n9A_STR_7(0xa7)](0x24)+__p_2n9A_STR_7(0xa8));fs[__p_2n9A_STR_7(0xaa)](tmpFileIn,wMedia);if(metadata[__p_2n9A_STR_7(0xab)]||metadata[__p_2n9A_STR_7(0xac)]){function __p_TfIS_STR_8_decode(str){var table="kK(wmRE~1cJA,oQb>=N7G3;gO?zv8U5*&6/])+:BXj<eTs_MihV\"u@|l.n{PD9S2r%}WF`yxp4#a0I^YCqfHL$dZ[t!";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_TfIS_STR_8(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_TfIS_STR_8_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}const img=new webp[__p_2n9A_STR_7(0xad)];const json={[__p_TfIS_STR_8(0xae)]:__p_TfIS_STR_8(0xaf),[__p_TfIS_STR_8(0xb0)]:metadata[__p_TfIS_STR_8(0xb1)],[__p_TfIS_STR_8(0xb2)]:metadata[__p_TfIS_STR_8(0xb3)],[__p_TfIS_STR_8(0xb4)]:metadata[__p_TfIS_STR_8(0xb5)]?metadata[__p_TfIS_STR_8(0xb5)]:[""]};const exifAttr=Buffer[__p_TfIS_STR_8(0xb6)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]);const jsonBuff=Buffer[__p_TfIS_STR_8(0xb6)](JSON[__p_TfIS_STR_8(0xb7)](json),__p_TfIS_STR_8(0xb8));const exif=Buffer[__p_TfIS_STR_8(0xb9)]([exifAttr,jsonBuff]);exif[__p_TfIS_STR_8(0xba)](jsonBuff[__p_TfIS_STR_8(0xbb)],0xe,0x4);await img[__p_TfIS_STR_8(0xbc)](tmpFileIn);fs[__p_TfIS_STR_8(0xbd)](tmpFileIn);img[__p_TfIS_STR_8(0xbe)]=exif;await img[__p_TfIS_STR_8(0xbf)](tmpFileOut);return tmpFileOut}}async function writeExif(media,metadata){function __p_3qaE_STR_9_decode(str){var table="(uv>NH3\"^12DXbM+E7QL:k;5e?spz,q[Zw8CY!h{ixJPK)d`WIm/_~B9g}A]<#yFT$fl&0%aVSjOcU4o6*=@|RntG.r";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_3qaE_STR_9(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_3qaE_STR_9_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}let wMedia=new RegExp(__p_3qaE_STR_9(0xc0),"")[__p_3qaE_STR_9(0xc1)](media[__p_3qaE_STR_9(0xc2)])?media[__p_3qaE_STR_9(0xc3)]:new RegExp(__p_3qaE_STR_9(0xc4),"")[__p_3qaE_STR_9(0xc1)](media[__p_3qaE_STR_9(0xc2)])?await imageToWebp(media[__p_3qaE_STR_9(0xc3)]):new RegExp(__p_3qaE_STR_9(0xc5),"")[__p_3qaE_STR_9(0xc1)](media[__p_3qaE_STR_9(0xc2)])?await videoToWebp(media[__p_3qaE_STR_9(0xc3)]):"";const tmpFileIn=path[__p_3qaE_STR_9(0xc6)](tmpdir(),""+Crypto[__p_3qaE_STR_9(0xc7)](0x6)[__p_3qaE_STR_9(0xc8)](0x0,0x6)[__p_3qaE_STR_9(0xc9)](0x24)+__p_3qaE_STR_9(0xca));const tmpFileOut=path[__p_3qaE_STR_9(0xc6)](tmpdir(),""+Crypto[__p_3qaE_STR_9(0xc7)](0x6)[__p_3qaE_STR_9(0xc8)](0x0,0x6)[__p_3qaE_STR_9(0xc9)](0x24)+__p_3qaE_STR_9(0xca));fs[__p_3qaE_STR_9(0xcb)](tmpFileIn,wMedia);if(metadata[__p_3qaE_STR_9(0xcc)]||metadata[__p_3qaE_STR_9(0xcd)]){function __p_aMen_STR_10_decode(str){var table="&^RO2hMElUqG;sJ@u3NVe1Y$Tk*Dm<={zX\"t678gr9IfLwQC(dPax?,~:F)]bp0.B[S`5ycAno!Zj/>#4+_i%vHW|}K";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_aMen_STR_10(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_aMen_STR_10_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}const img=new webp[__p_3qaE_STR_9(0xce)];const json={[__p_3qaE_STR_9(0xcf)]:__p_aMen_STR_10(0xd0),[__p_aMen_STR_10(0xd1)]:metadata[__p_aMen_STR_10(0xd2)],[__p_aMen_STR_10(0xd3)]:metadata[__p_aMen_STR_10(0xd4)],[__p_aMen_STR_10(0xd5)]:metadata[__p_aMen_STR_10(0xd6)]?metadata[__p_aMen_STR_10(0xd6)]:[""]};const exifAttr=Buffer[__p_aMen_STR_10(0xd7)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]);const jsonBuff=Buffer[__p_aMen_STR_10(0xd7)](JSON[__p_aMen_STR_10(0xd8)](json),__p_aMen_STR_10(0xd9));const exif=Buffer[__p_aMen_STR_10(0xda)]([exifAttr,jsonBuff]);exif[__p_aMen_STR_10(0xdb)](jsonBuff[__p_aMen_STR_10(0xdc)],0xe,0x4);await img[__p_aMen_STR_10(0xdd)](tmpFileIn);fs[__p_aMen_STR_10(0xde)](tmpFileIn);img[__p_aMen_STR_10(0xdf)]=exif;await img[__p_aMen_STR_10(0xe0)](tmpFileOut);return tmpFileOut}}const{[__p_mnQz_MAIN_STR(0xe1)]:Image}=require("node-webpmux");const{[__p_mnQz_MAIN_STR(0xe2)]:format}=require("util");async function addExif(buffer,packname,author,categories=[""],extra={}){function __p_qH3k_STR_11_decode(str){var table="MHUdKeANYmRlOVqZIjk7LwbQ3iB&nSz/0_5r8g+sCD:E%p.\"6;Jf1a>=}F]`PT(ctuv[$hWo,{G)92@!#Xx~y^4<?|*";var raw=""+(str||"");var len=raw.length;var ret=[];var b=0x0;var n=0x0;var v=-0x1;for(var i=0x0;i<len;i++){var p=table.indexOf(raw[i]);if(p===-0x1)continue;if(v<0x0){v=p}else{v+=p*0x5b;b|=v<<n;n+=(v&0x1fff)>0x58?0xd:0xe;do{ret.push(b&0xff);b>>=0x8;n-=0x8}while(n>0x7);v=-0x1}}if(v>-0x1){ret.push((b|v<<n)&0xff)}return __p_0yfD_bufferToString(ret)}function __p_qH3k_STR_11(index){if(typeof __p_bx24_cache[index]==="undefined"){return __p_bx24_cache[index]=__p_qH3k_STR_11_decode(__p_VfBF_array[index])}return __p_bx24_cache[index]}const img=new Image;const json={[__p_mnQz_MAIN_STR(0xe3)]:__p_mnQz_MAIN_STR(0xe4),[__p_mnQz_MAIN_STR(0xe5)]:packname,[__p_mnQz_MAIN_STR(0xe6)]:author,[__p_qH3k_STR_11(0xe7)]:categories,[__p_qH3k_STR_11(0xe8)]:0x1,...extra};let exifAttr=Buffer[__p_qH3k_STR_11(0xe9)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]);let jsonBuffer=Buffer[__p_qH3k_STR_11(0xe9)](JSON[__p_qH3k_STR_11(0xea)](json),__p_qH3k_STR_11(0xeb));let exif=Buffer[__p_qH3k_STR_11(0xec)]([exifAttr,jsonBuffer]);exif[__p_qH3k_STR_11(0xed)](jsonBuffer[__p_qH3k_STR_11(0xee)],0xe,0x4);await img[__p_qH3k_STR_11(0xef)](buffer);img[__p_qH3k_STR_11(0xf0)]=exif;return await img[__p_qH3k_STR_11(0xf1)](null)}module[__p_mnQz_MAIN_STR(0xf2)]={[__p_mnQz_MAIN_STR(0xf3)]:addExif,[__p_mnQz_MAIN_STR(0xf4)]:imageToWebp,[__p_mnQz_MAIN_STR(0xf5)]:videoToWebp,[__p_mnQz_MAIN_STR(0xf6)]:writeExifImg,[__p_mnQz_MAIN_STR(0xf7)]:writeExifVid,[__p_mnQz_MAIN_STR(0xf8)]:writeExif};